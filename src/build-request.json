{
  "kind": "build_request",
  "title": "Fix custom username display in profile area",
  "projectName": "Game Vault",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-63",
      "text": "Update the backend getUserProfile endpoint to return the custom username field when a user has paid for and created a custom username",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-fix-custom-username"
        ],
        "quotes": [
          "Fix the custom usernames when users go to make there own and come to the store front page it shows a ai name generated instead of the custom one they asked for"
        ]
      },
      "acceptanceCriteria": [
        "Backend profile query returns custom username field when present",
        "Custom username takes precedence over AI-generated username in the response"
      ]
    },
    {
      "id": "REQ-64",
      "text": "Update the Layout component username display in the profile area to show the custom username when available, falling back to the AI-generated username only if no custom username exists",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-fix-custom-username"
        ],
        "quotes": [
          "Profile area",
          "Yes all custom usernames",
          "Yes if the user has paid for a custom username"
        ]
      },
      "acceptanceCriteria": [
        "Profile area displays custom username for users who have paid £0.10 for custom usernames",
        "Profile area displays AI-generated username only when no custom username exists",
        "Username display updates immediately after custom username creation"
      ]
    },
    {
      "id": "REQ-65",
      "text": "Update the useProfile query hook to properly fetch and cache the custom username field from the backend",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-fix-custom-username"
        ]
      },
      "acceptanceCriteria": [
        "Profile query returns custom username when available",
        "Query cache invalidates after custom username submission approval"
      ]
    },
    {
      "id": "REQ-66",
      "text": "Update the Storefront component username display to show custom username when available instead of AI-generated username",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-fix-custom-username"
        ],
        "quotes": [
          "come to the store front page it shows a ai name generated instead of the custom one"
        ]
      },
      "acceptanceCriteria": [
        "Storefront page displays custom username in all username references when user has paid for custom username",
        "Admin authorization check uses custom username for whitelist verification when available"
      ]
    }
  ],
  "constraints": [
    "Do not modify the Internet Identity authentication flow",
    "Maintain backward compatibility with users who only have AI-generated usernames",
    "Do not change the custom username payment submission and approval workflow"
  ],
  "nonGoals": [
    "Changing the custom username price (£0.10)",
    "Modifying the custom username validation rules",
    "Updating the admin username whitelist logic",
    "Changing the username regeneration feature"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}