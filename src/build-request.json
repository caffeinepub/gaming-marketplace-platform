{
  "kind": "build_request",
  "title": "Expand phone number support to worldwide format and add phone number update functionality",
  "projectName": "Game Vault",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-86",
      "text": "Update the PhoneNumberSetup component to accept any numeric input without the '+' prefix, removing the 11-digit UK phone number validation and replacing it with worldwide phone number format that accepts any length numeric input",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-worldwide-phone"
        ],
        "quotes": [
          "Accept any numeric input without the '+' prefix (no specific validation beyond numbers)"
        ]
      },
      "acceptanceCriteria": [
        "Phone number input field accepts any numeric characters without length restrictions",
        "No country-specific validation is enforced",
        "Plus sign (+) prefix is not allowed in the input",
        "Non-numeric characters are rejected"
      ]
    },
    {
      "id": "REQ-87",
      "text": "Update the backend savePhoneNumber endpoint validation to accept worldwide phone numbers by removing the 11-digit length requirement and accepting any numeric input without the '+' prefix",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-user-worldwide-phone"
        ],
        "quotes": [
          "Accept any numeric input without the '+' prefix (no specific validation beyond numbers)"
        ]
      },
      "acceptanceCriteria": [
        "Backend accepts phone numbers of any length",
        "Only numeric characters are allowed",
        "Plus sign prefix is rejected",
        "Phone number uniqueness validation still applies"
      ]
    },
    {
      "id": "REQ-88",
      "text": "Add 'Haven't Added Phone Number' button to the PhoneNumberSetup dialog component that allows users to proceed with adding their phone number through the same interface when clicked",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-button-location"
        ],
        "quotes": [
          "When you are prompted for your phone number add the button there and when pressed it will add a new phone number to that users account"
        ]
      },
      "acceptanceCriteria": [
        "Button is visible within the PhoneNumberSetup dialog",
        "Button labeled 'Haven't Added Phone Number' or similar clear text",
        "Clicking the button allows users to proceed with phone number entry in the same dialog",
        "Button provides an explicit action for users to add their phone number"
      ]
    },
    {
      "id": "REQ-89",
      "text": "Update the App.tsx authentication flow to require all users (both new and existing) to provide a phone number on login if they haven't already, displaying the PhoneNumberSetup dialog and blocking access to all app features until phone number is saved",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-existing-users"
        ],
        "quotes": [
          "Yes make them add it when they login"
        ]
      },
      "acceptanceCriteria": [
        "All authenticated users without a phone number are prompted with PhoneNumberSetup dialog",
        "Both new users and existing users (who created accounts before phone requirement) are required to add phone number on login",
        "Users cannot access any app features until phone number is provided",
        "Phone number check occurs after terms acceptance and before other features"
      ]
    }
  ],
  "constraints": [
    "Maintain single-actor Motoko backend architecture",
    "Preserve existing phone number uniqueness validation",
    "Do not modify frontend/src/hooks/useInternetIdentity.ts or other immutable paths",
    "Keep existing phone number storage and admin whitelist functionality intact"
  ],
  "nonGoals": [
    "Adding country code selection dropdown",
    "Implementing phone number formatting or display masks",
    "Adding phone number verification via SMS",
    "Changing the existing admin phone number whitelist system"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}